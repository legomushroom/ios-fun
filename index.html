<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>svg fun</title>
    <link href="css/main.css" type="text/css" rel="stylesheet">
  </head>
  <body><svg id="svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="0" height="0" viewBox="0 0 200 200" style="">
    <image ></image>
  <defs>
    <linearGradient id="redyel" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#ff0000"/>   
        <stop offset="100%" stop-color="#ffff00"/>   
    </linearGradient>
    <linearGradient id="yelgre" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#ffff00"/>   
        <stop offset="100%" stop-color="#00ff00"/>   
    </linearGradient>
    <linearGradient id="grecya" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#00ff00"/>   
        <stop offset="100%" stop-color="#00ffff"/>   
    </linearGradient>
    <linearGradient id="cyablu" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#00ffff"/>   
        <stop offset="100%" stop-color="#0000ff"/>   
    </linearGradient>
    <linearGradient id="blumag" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#0000ff"/>   
        <stop offset="100%" stop-color="#ff00ff"/>   
    </linearGradient>
    <linearGradient id="magred" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#ff00ff"/>   
        <stop offset="100%" stop-color="#ff0000"/>   
    </linearGradient>

    <pattern id="gradient-pattern" width="1" height="1800" patternUnits="userSpaceOnUse">
        <g id="js-gradient">
            <rect x="0" y="0"   width="1" height="300" fill="url(#redyel)" />
            <rect x="0" y="300"  width="1" height="300" fill="url(#yelgre)" />
            <rect x="0" y="600"  width="1" height="300" fill="url(#grecya)" />
            <rect x="0" y="900"  width="1" height="300" fill="url(#cyablu)" />
            <rect x="0" y="1200"  width="1" height="300" fill="url(#blumag)" />
            <rect x="0" y="1500"  width="1" height="300" fill="url(#magred)" />
        </g>
    </pattern>


    <clipPath id="clip1">
        <rect fill="white" x="1800" y="0" width="2" height="3600" />
    </clipPath>

    <pattern id="striped-pattern" width="10" height="10" patternUnits="userSpaceOnUse">
        <path d="M-4 12L12 -4ZM12 6L6 12ZM-4 2L2 -4" stroke="white" stroke-opacity=".4" stroke-width="1"></path>
    </pattern>

    <mask id="mask1">
        <rect fill="white" x="1800" y="0" width="" height="3600" />
    </mask>

    <mask id="mask2">
        
        <image x="1500" y="1500" height="1500px" width="1500px" xlink:href="http://www.coolwebmasters.com/uploads/posts/2011-03/1298971249_animated-gif-16.gif"></image>
    <!--     <image x="1500" y="1500" height="1500px" width="1500px" xlink:href="http://www.thisiscolossal.com/wp-content/uploads/2013/01/3.gif"></image> -->
        <!-- <image x="1500" y="1500" height="1500px" width="1500px" xlink:href="http://25.media.tumblr.com/cd7aa79a89efb2a05aea666eadaa1dc0/tumblr_my0iucageQ1s2t3cto1_400.gif"></image> -->
       <!--  <image x="1500" y="1500" height="1500px" width="1500px" xlink:href="http://24.media.tumblr.com/8d19021aee1d58e431326ace608e47e5/tumblr_mzggk8JVZV1s2t3cto1_400.gif"></image> -->
        <!-- <image xlink:href="http://d13yacurqjgara.cloudfront.net/users/4111/screenshots/1337431/dec-6-2013.gif" x="1500" y="1500" height="1500px" width="1500px" ></image> -->
        <path id="js-path" stroke-dasharray="3600 3600" stroke-dashoffset="0.00" fill="none" stroke="white" stroke-width="4" d="M1539,1747.75c-7.482-6.77-1-22.875-1-22.875
    l-6.125,16.5c-8.375,10.962-18.125,10.962-18.125,10.962c-13.125,2.413-17.238-8.238-17.238-8.238
    c-4.387-9.974,6.113-20.974,6.113-20.974c7.397-7.95,21.75-6.875,21.75-6.875c12.75,1,9.875,18.75,9.875,18.75
    s0.145-13.424-2.875-16.5c-6.625-6.75-33.125-1.875-33.125-1.875c-45,6.75-84.583,20.042-84.583,20.042
    c-19.917,6.583-45.792,8.208-45.792,8.208c-21.024,2.399-37.125-1.25-37.125-1.25c-17.125-4.188-15.312-16.938-15.312-16.938
    c1.5-10.875,10.125-7.562,10.125-7.562c10,5.188,4.312,18.75,4.312,18.75c-2.899,9.367-17.25,14-17.25,14
    c-16.438,3.601-20.188-6.688-20.188-6.688c-4.438-8.5,3.625-19.438,3.625-19.438c9.188-11.438,24.562-10.375,24.562-10.375
    c-8.625-2.375-27.458,0.708-27.458,0.708c-29.75,3.833-84.042,20.792-84.042,20.792c-12.625,4.208-73.125,14.75-73.125,14.75
    c-20.438,3.812-27-5.5-27-5.5c-6.131-5.859-4.422-25.217-4-33.688c1-20.062,15.375-60.375,15.375-60.375
    c9.188-23.5,16.292-21.062,16.292-21.062c8.958,2.438,1.583,27.75,1.583,27.75c-9.125,26.438-30.75,39.5-30.75,39.5
    c-18.812,13.375-102.322,38.75-102.322,38.75"/>
    </mask>

    <clipPath id="diamond">
        <path d="M1527.456,1182.644c42.784-22.733,92.504-31.867,140.603-26.347c37.884,4.24,74.692,17.676,106.409,38.83
        c35.487,23.536,64.61,56.586,83.403,94.804c24.992,50.203,31.356,109.212,18.269,163.696
        c13.312,4.451,26.196,10.209,38.298,17.322c35.093,20.473,63.713,51.843,80.789,88.713c11.755,25.135,18.037,52.748,18.643,80.47
        v8.072c-0.558,27.218-6.595,54.327-17.907,79.102c-16.771,37.025-45.124,68.647-80.048,89.427
        c-22.324,13.347-47.283,22.249-73.017,26.054c-8.739,1.43-17.608,1.695-26.408,2.484h-628.357
        c-10.346-0.564-20.738-0.851-30.996-2.49c-42.287-6.153-82.321-26.436-112.404-56.764c-32.167-32.023-52.892-75.277-57.499-120.45
        c-0.606-5.778-0.946-11.577-1.103-17.376v-8.052c0.164-5.166,0.436-10.325,0.933-15.464
        c4.152-44.377,23.842-87.031,54.722-119.136c20.929-21.896,46.854-38.966,75.25-49.502c-8.433-33.507-6.643-69.539,5.356-101.958
        c13.959-38.169,41.974-70.927,77.441-90.754c23.842-13.442,50.945-21.01,78.299-21.896c29.757-1.109,59.772,5.663,86.119,19.548
        c20.105,10.55,38.074,25.128,52.585,42.586C1438.274,1252.087,1478.084,1208.568,1527.456,1182.644z M1620.77,1162.381
        c-43.057,3.478-85.003,19.241-119.742,44.915c-35.65,26.177-63.727,62.569-79.83,103.781c-0.599,2.749-4.594,3.6-6.146,1.205
        c-20.364-26.272-48.746-46.269-80.449-56.322c-41.417-13.36-88.06-9.481-126.616,10.733
        c-20.753,10.781-39.17,26.007-53.667,44.356c-15.866,19.989-27.014,43.709-32.187,68.708c-5.302,25.346-4.567,51.938,2.164,76.952
        c0.756,1.824-0.088,4.212-2.103,4.736c-13.905,4.956-27.266,11.455-39.694,19.426c-36.175,23.046-64.359,58.39-78.551,98.887
        c-10.536,29.758-13.551,62.101-8.875,93.308c6.568,45.125,29.92,87.459,64.346,117.312
        c34.691,30.499,80.613,47.827,126.813,47.745c204.649-0.013,409.306-0.006,613.955-0.006c9.991-0.041,20.003,0.251,29.968-0.716
        c35.902-3.028,70.826-16.47,99.561-38.195c34.528-25.897,60.024-63.598,70.941-105.374c7.753-29.369,8.475-60.562,2.109-90.265
        c-5.336-25.061-15.783-49.011-30.443-70.022c-24.23-34.896-60.208-61.487-100.772-74.181c-1.824-0.333-3.314-2.158-2.846-4.036
        c1.083-4.669,2.22-9.325,3.084-14.035c9.984-51.917,1.933-107.15-22.876-153.868c-21.419-40.776-55.09-74.977-95.512-97.043
        C1713.226,1168.249,1666.453,1158.502,1620.77,1162.381z"/>
    </clipPath>

  </defs>

  <g id="circle" fill="none" transform="translate(100,100)">
    <path vector-effect="non-scaling-stroke" d="M 0,-100 A 100,100 0 0,1 86.6,-50" stroke="url(#redyel)"/>
    <path vector-effect="non-scaling-stroke" d="M 86.6,-50 A 100,100 0 0,1 86.6,50" stroke="url(#yelgre)"/>
    <path vector-effect="non-scaling-stroke" d="M 86.6,50 A 100,100 0 0,1 0,100" stroke="url(#grecya)"/>
    <path vector-effect="non-scaling-stroke" d="M 0,100 A 100,100 0 0,1 -86.6,50" stroke="url(#cyablu)"/>
    <path vector-effect="non-scaling-stroke" d="M -86.6,50 A 100,100 0 0,1 -86.6,-50" stroke="url(#blumag)"/>
    <path vector-effect="non-scaling-stroke" d="M -86.6,-50 A 100,100 0 0,1 0,-100" stroke="url(#magred)"/>
  </g>



<foreignObject x="0" height="1500" width="1500" y="0"><canvas xmlns="http://www.w3.org/1999/xhtml" width="1500" height="1500"></canvas><img xmlns="http://www.w3.org/1999/xhtml" src="http://placekitten.com/g/300/300" style="visibility: hidden;" /></foreignObject>

<script type="text/javascript"><![CDATA[
    /*
 * $Id: SVGCanvasElement.js 778 2009-08-04 09:53:53Z klaus $
 *
 * This is a simple helper library to use canvas in SVG. It creates
 * canvas elements within foreignObjects
 *
 * Example:
 *
 * var canvas = new SVGCanvasElement(0,0,300,150,parentNode);
 * var context = canvas.getContext('2d');
 * context.fillRect(0,0,300,150);
 *
 * @param {float} dx: upper-left x-coordinate of canvas-area
 * @param {float} dy: upper-left y-coordinate of canvas-area
 * @param {float} dw: overall width of canvas-area
 * @param {float} dh: overall height of canvas-area
 * @param {SVGElement} parentNode: append foreignObject with canvas to this node (optional)
 *                                 defaults to document.rootElement if not specified
 * @return {SVGCanvasElement}: object that implements the HTMLCanvasElement interface
 *
 */

(function(){
    // namespaces
    var svgNS = 'http://www.w3.org/2000/svg';
    var xhtmlNS = 'http://www.w3.org/1999/xhtml';
    var xlinkNS = 'http://www.w3.org/1999/xlink';

    var SVGCanvasElement_ = function(dx,dy,dw,dh,parentNode) {
        // create <foreignObject /> SVG-element
        var f = document.createElementNS(svgNS,"foreignObject");
        f.x.baseVal.value = dx;
        f.y.baseVal.value = dy;
        f.width.baseVal.value = dw;
        f.height.baseVal.value = dh;
        f.setAttributeNS(null,'id','foreign-obj');

        // create <canvas /> XHTML-element
        var c = document.createElementNS(xhtmlNS,"canvas");
        c.width = dw;
        c.height = dh;

        // append foreignObject to parent-node and canvas to foreignObject
        var pNode = (typeof parentNode != 'undefined') ? parentNode : document.getElementById('svg');
        var foObj = pNode.appendChild(f);
        var cElem = foObj.appendChild(c);

        // expose HTMLCanvasElement interface
        this.canvas = cElem;
        this.width = cElem.width;
        this.height = cElem.height;
        this.toDataURL = function(type) {
            // TODO: implement variadic args
            return cElem.toDataURL(type);
        };
        this.getContext = function(contextId) {
            return cElem.getContext(contextId);
        };

       /*
        * This custom method adds an HTMLImageElement to the canvas' foreignObject
        * It expects the ID of an existing SVGImage or a reference to an SVGImage node as argument.
        * In both cases, the xlink:href is used as src for the appended HTMLImageElement.
        *
        * Examples:
        * context.drawImage(canvas.importImage(svgImageRef),0,0);
        * context.drawImage(canvas.importImage('svgImage'),0,0);
        *
        * @param {string|SVGImageElement} sourceImg: ID of SVGImageElement or reference to an SVGImageElement 
        * @return {HTMLImageElement}: reference to the html img-element created in foreignObject
        *
        */
        this.importImage = function(sourceImg) {
            var imgSrc = (typeof sourceImg == 'string')
                ? document.getElementById(sourceImg).getAttributeNS(xlinkNS,"href")
                : sourceImg.getAttributeNS(xlinkNS,"href");
            var img = document.createElementNS(xhtmlNS,"img");
            img.setAttributeNS(null,"src",imgSrc);
            img.style.visibility = "hidden";
            return foObj.appendChild(img);
        };
    }
    window.SVGCanvasElement = SVGCanvasElement_;
})();

]]></script>

<script type="text/javascript"><![CDATA[
window.onload = function() {
    var canvas = new SVGCanvasElement(0,0,1500,1500);
    var ctx = canvas.getContext('2d');

    ctx.fillStyle="#FFF";
    ctx.fillRect(0,0,150,75);

    var image = new Image();
    image.src = canvas.toDataURL("image/png");
    
    document.body.appendChild(image);
  
};
]]></script>


</svg>





    <div class="loader">
      <svg viewBox="0 0 3600 3600">
        <g mask="url(#mask2)">
          <rect id="id1" transform="rotate(0)" fill="url(#gradient-pattern)" width="100%" height="100%"></rect>
        </g>
        <script>
          var el = document.getElementById('id1');
          var i = 0;
          var interval = setInterval(function(){
           i++;
           el.setAttribute('transform','rotate(' + i + ', 1800, 1800)');
          }, 1000/20) 
          
        </script>
        <script>
          var animate = function(){
           var path = document.querySelector('#js-path');
           var length = path.getTotalLength();
           // Clear any previous transition
           path.style.transition = path.style.WebkitTransition = 'none';
           // Set up the starting positions
           path.style.strokeDasharray = length + ' ' + length;
           path.style.strokeDashoffset = length;
           // Trigger a layout so styles are calculated & the browser
           // picks up the starting position before animating
           path.getBoundingClientRect();
           // Define our transition
           path.style.transition = path.style.WebkitTransition = 'stroke-dashoffset 2s ease-in-out';
           // Go!
           path.style.strokeDashoffset = '0';
          }
          
          animate()
          
          setInterval(function(){ animate() }, 6000);
          
          
          
          
        </script>
      </svg>
    </div>
  </body>
</html>